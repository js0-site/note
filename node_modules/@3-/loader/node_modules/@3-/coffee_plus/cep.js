#!/usr/bin/env -S node --loader=@w5/jsext --trace-uncaught --expose-gc --unhandled-rejections=strict --experimental-import-meta-resolve
var argv, compile, ext, outdir, watch;

import dir from './dir.js';

import {
  resolve
} from 'path';

import yargs from 'yargs/yargs';

import {
  hideBin
} from 'yargs/helpers';

//.alias('watch', 'w')
//.describe('watch', 'watch change')
argv = yargs(hideBin(process.argv)).alias('compile', 'c').describe('compile', 'compile file or dir').alias('outdir', 'o').describe('outdir', 'outdir dir').alias('ext', 'e').describe('ext', 'js / mjs').parse();

({compile, outdir, watch, ext} = argv);

if (!compile) {
  compile = process.cwd();
}

compile = resolve(compile);

await dir(compile, outdir, ext || 'js');
